"use strict";(self.webpackChunkproduct_docs=self.webpackChunkproduct_docs||[]).push([[5986],{7561:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(5893),o=t(1151);const r={description:"Integration Guide for OpenVPN on Windows",last_update:{date:"01-11-2024"},slug:"/how-tos/openvpn-integration-windows"},s="OpenVPN Integration Guide for Windows",a={id:"how-tos/openvpn/integration-windows",title:"OpenVPN Integration Guide for Windows",description:"Integration Guide for OpenVPN on Windows",source:"@site/docs/how-tos/openvpn/integration-windows.md",sourceDirName:"how-tos/openvpn",slug:"/how-tos/openvpn-integration-windows",permalink:"/pr-preview/pr-238/how-tos/openvpn-integration-windows",draft:!1,unlisted:!1,editUrl:"https://github.com/emnify/product-docs/blob/main/docs/how-tos/openvpn/integration-windows.md",tags:[],version:"current",lastUpdatedAt:1704931200,formattedLastUpdatedAt:"Jan 11, 2024",frontMatter:{description:"Integration Guide for OpenVPN on Windows",last_update:{date:"01-11-2024"},slug:"/how-tos/openvpn-integration-windows"}},c={},d=[{value:"Add mandatory layer of security and privacy",id:"add-mandatory-layer-of-security-and-privacy",level:2},{value:"Setting Up OpenVPN Client on Windows",id:"setting-up-openvpn-client-on-windows",level:2},{value:"Install OpenVPN Software",id:"install-openvpn-software",level:3},{value:"Create Credentials for Authentication",id:"create-credentials-for-authentication",level:3},{value:"Authentication with User Credentials",id:"authentication-with-user-credentials",level:4},{value:"Authentication with Application Token",id:"authentication-with-application-token",level:4},{value:"Correct Credentials File Path in Client Configuration File",id:"correct-credentials-file-path-in-client-configuration-file",level:3},{value:"Starting and Monitoring the OpenVPN connection",id:"starting-and-monitoring-the-openvpn-connection",level:3},{value:"Testing the Successful Data Connectivity",id:"testing-the-successful-data-connectivity",level:3}];function l(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"openvpn-integration-guide-for-windows",children:"OpenVPN Integration Guide for Windows"}),"\n",(0,i.jsx)(n.p,{children:"emnify customers can create their own Virtual Private Network for their mobile IoT/M2M devices fitted with emnify SIMs.\nData traffic will be exchanged between the devices and the application server through an OpenVPN tunnel, enabling direct communication with the IPs of the mobile devices (no NAT applied)."}),"\n",(0,i.jsx)(n.p,{children:"The tunnel is established between the emnify Core Network and the customers VPN gateway or server."}),"\n",(0,i.jsxs)(n.p,{children:["See this video ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=yt44fJpfkQ4",children:"guide for how to secure your devices with Open VPN"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"add-mandatory-layer-of-security-and-privacy",children:"Add mandatory layer of security and privacy"}),"\n",(0,i.jsxs)(n.p,{children:["Any traffic exchanged with the mobile devices is encrypted before transmitted over the public internet, therefore adding an additional layer of security and privacy.\nFor that ",(0,i.jsx)(n.strong,{children:"no"})," VPN software needs to be installed on the device or any configuration changes to be done, the default emnify APN does also support VPN flows."]}),"\n",(0,i.jsx)(n.p,{children:"First, download the VPN config file from the emnify User Interface"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:'Click on the "Integrations" menu'}),"\n",(0,i.jsx)(n.li,{children:'Scroll down to the "secure connection" section and download the configuration file'}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Additionally, you need to change the Internet Regional Breakout in the device policy:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:'Click on "Device Policies"'}),"\n",(0,i.jsx)(n.li,{children:'Scroll down to "Service Policies", select the policy assigned to the devices you want to secure and click on "Details".'}),"\n",(0,i.jsxs)(n.li,{children:['On the "Internet Breakout Region" menu, set the Service Policy to a VPN breakout region, e.g., ',(0,i.jsx)(n.code,{children:"eu-west-1 (VPN)"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-openvpn-client-on-windows",children:"Setting Up OpenVPN Client on Windows"}),"\n",(0,i.jsx)(n.h3,{id:"install-openvpn-software",children:"Install OpenVPN Software"}),"\n",(0,i.jsx)(n.p,{children:"Download the installation file according to your Windows machine at OpenVPN Downloads."}),"\n",(0,i.jsxs)(n.p,{children:["The pre-built configuration file's name is either ",(0,i.jsx)(n.strong,{children:"emnify-eu-west-1.ovpn, emnify-eu-east-1.ovpn or emnify-ap-southeast-1.ovpn"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Please store that file in your server in the folder ",(0,i.jsx)(n.em,{children:"\\OpenVPN\\config"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"create-credentials-for-authentication",children:"Create Credentials for Authentication"}),"\n",(0,i.jsxs)(n.p,{children:["Next, create a file titled e.g. ",(0,i.jsx)(n.strong,{children:"credentials.txt"})," in the folder ",(0,i.jsx)(n.em,{children:"\\OpenVPN\\config"}),".",(0,i.jsx)(n.br,{}),"\n","This will contain the information to authenticate your session, either via emnify user credentials or with an application token (recommended)."]}),"\n",(0,i.jsx)(n.h4,{id:"authentication-with-user-credentials",children:"Authentication with User Credentials"}),"\n",(0,i.jsxs)(n.p,{children:["The contents of the ",(0,i.jsx)(n.strong,{children:"credentials.txt"})," file should only have two lines as follows:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"username@domain.com\nYourPassword\n"})}),"\n",(0,i.jsx)(n.h4,{id:"authentication-with-application-token",children:"Authentication with Application Token"}),"\n",(0,i.jsxs)(n.p,{children:["When you run the OpenVPN client on a VPN gateway or application server it is recommended to use a dedicated application token.",(0,i.jsx)(n.br,{}),"\n","In that case, the first line in the ",(0,i.jsx)(n.em,{children:"credentials.txt"})," file needs to be filled with your emnify organisation identifier and the application token instead of the password."]}),"\n",(0,i.jsxs)(n.p,{children:["You can create application tokens in the emnify portal, same section you downloaded the configuration file from.",(0,i.jsx)(n.br,{}),"\n",'Select "Create New Application Token" and Copy/Paste the token into the ',(0,i.jsx)(n.code,{children:"credentials.txt"})," file.",(0,i.jsx)(n.br,{}),"\n","Your organisation ID is also available there."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"orgId\nApplicationToken\n"})}),"\n",(0,i.jsx)(n.h3,{id:"correct-credentials-file-path-in-client-configuration-file",children:"Correct Credentials File Path in Client Configuration File"}),"\n",(0,i.jsxs)(n.p,{children:["Find the following line in ",(0,i.jsx)(n.em,{children:"client.ovpn"})," and insert the complete file path from ",(0,i.jsx)(n.em,{children:"credentials.txt"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'auth-user-pass "(...)\\\\OpenVPN\\\\config\\\\credentials.txt"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In case you do not want to store your credentials, you can choose to enter them each time the VPN tunnel is established.",(0,i.jsx)(n.br,{}),"\n","For that, please comment the line above with ",(0,i.jsx)(n.code,{children:";"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"starting-and-monitoring-the-openvpn-connection",children:"Starting and Monitoring the OpenVPN connection"}),"\n",(0,i.jsx)(n.p,{children:"You can start the OpenVPN Gui application and connect the client tunnel through the icon in the taskbar notification area."}),"\n",(0,i.jsxs)(n.p,{children:["To monitor the connection go to ",(0,i.jsx)(n.em,{children:"OpenVPN/log/client.txt"}),".",(0,i.jsx)(n.br,{}),"\n","If everything works, you should see something like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Fri Nov 04 10:03:35 2016 Successful ARP Flush on interface [20] {BD06804E-FC58-480D-B6A5-13E0EAE98940}\nFri Nov 04 10:03:40 2016 TEST ROUTES: 2/2 succeeded len=2 ret=1 a=0 u/d=up\nFri Nov 04 10:03:40 2016 MANAGEMENT: >STATE:1478250220,ADD_ROUTES,,,\nFri Nov 04 10:03:40 2016 C:\\WINDOWS\\system32\\route.exe ADD 10.64.0.1 MASK 255.255.255.255 10.64.24.122\nFri Nov 04 10:03:40 2016 ROUTE: CreateIpForwardEntry succeeded with dwForwardMetric1=35 and dwForwardType=4\nFri Nov 04 10:03:40 2016 Route addition via IPAPI succeeded [adaptive]\nFri Nov 04 10:03:40 2016 C:\\WINDOWS\\system32\\route.exe ADD 10.193.104.0 MASK 255.255.252.0 10.64.24.122\nFri Nov 04 10:03:40 2016 ROUTE: CreateIpForwardEntry succeeded with dwForwardMetric1=35 and dwForwardType=4\nFri Nov 04 10:03:40 2016 Route addition via IPAPI succeeded [adaptive]\nFri Nov 04 10:03:40 2016 Initialization Sequence Completed\nFri Nov 04 10:03:40 2016 MANAGEMENT: >STATE:1478250220,CONNECTED,SUCCESS,10.64.24.121,52.209.29.183\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this sample, the static private IP address of your VPN client is ",(0,i.jsx)(n.strong,{children:"10.64.24.122"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"testing-the-successful-data-connectivity",children:"Testing the Successful Data Connectivity"}),"\n",(0,i.jsxs)(n.p,{children:["If the VPN tunnel is successfully established you will be able to connect directly to the private IP addresses of your mobile devices.",(0,i.jsx)(n.br,{}),"\n","For testing, you can choose any for your endpoints that has currently an active data session (marked as ",(0,i.jsx)(n.strong,{children:"ONLINE"})," in the emnify Portal) and retrieve the assigned IP address from the details section."]}),"\n",(0,i.jsxs)(n.p,{children:["Using the command Prompt (",(0,i.jsx)(n.em,{children:"cmd"})," application on Windows), ping the chosen IP address from your device:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"C:\\>ping 10.193.104.2\n\nPinging 10.193.104.2 with 32 bytes of data:\nReply from 10.193.104.2: bytes=32 time=1158ms TTL=62\nReply from 10.193.104.2: bytes=32 time=391ms TTL=62\nReply from 10.193.104.2: bytes=32 time=413ms TTL=62\nReply from 10.193.104.2: bytes=32 time=1307ms TTL=62\n"})}),"\n",(0,i.jsx)(n.p,{children:"For this to work your device needs to run an IP stack that is responding to ICMP echo request, this might not be the case for embedded devices that do implement only partial IP stack functionality."})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>s});var i=t(7294);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);