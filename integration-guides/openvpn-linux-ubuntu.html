<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-services/platform/integration-guides/openvpn/linux" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Integrate OpenVPN on Linux | emnify Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.emnify.com/integration-guides/openvpn-linux-ubuntu"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Integrate OpenVPN on Linux | emnify Documentation"><meta data-rh="true" name="description" content="Step-by-step guide for integrating OpenVPN on Linux to use on devices with emnify eSIMs."><meta data-rh="true" property="og:description" content="Step-by-step guide for integrating OpenVPN on Linux to use on devices with emnify eSIMs."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.emnify.com/integration-guides/openvpn-linux-ubuntu"><link data-rh="true" rel="alternate" href="https://docs.emnify.com/integration-guides/openvpn-linux-ubuntu" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.emnify.com/integration-guides/openvpn-linux-ubuntu" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WXU9AQM67J-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="emnify Documentation" href="/opensearch.xml">


<script src="https://cdn.cookielaw.org/consent/0c5a33bc-8e12-407d-937d-4e4c9f6e86a0/OtAutoBlock.js" defer="defer"></script>
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language charset="UTF-8" data-domain-script="0c5a33bc-8e12-407d-937d-4e4c9f6e86a0" defer="defer"></script>
<script src="/scripts/optanonWrapper.js" defer="defer"></script>
<script src="/scripts/googleTagManager.js" async></script>
<script src="/scripts/jentisTagManager.js"></script><link rel="stylesheet" href="/assets/css/styles.5ccdc7b1.css">
<script src="/assets/js/runtime~main.76a8210e.js" defer="defer"></script>
<script src="/assets/js/main.d7018aad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-dark.svg" alt="emnify Documentation – Home" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-dark.svg" alt="emnify Documentation – Home" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Documentation</b></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">emnify IoT SuperNetwork</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/quickstart">Getting started with emnify</a><button aria-label="Expand sidebar category &#x27;Getting started with emnify&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/portal">emnify Portal</a><button aria-label="Expand sidebar category &#x27;emnify Portal&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/services/global-iot-sim">Connectivity services</a><button aria-label="Expand sidebar category &#x27;Connectivity services&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/integration-guides">Platform services</a><button aria-label="Collapse sidebar category &#x27;Platform services&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/integration-guides">Integration guides</a><button aria-label="Collapse sidebar category &#x27;Integration guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/integration-guides">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/integration-guides/openvpn-linux-ubuntu">OpenVPN</a><button aria-label="Collapse sidebar category &#x27;OpenVPN&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/integration-guides/openvpn-linux-ubuntu">Linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/integration-guides/openvpn-macos">macOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/integration-guides/openvpn-windows">Windows</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/multicloud-data-streamer">Data Streamer</a><button aria-label="Expand sidebar category &#x27;Data Streamer&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/system-events">Events</a><button aria-label="Expand sidebar category &#x27;Events&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/services/security">Security</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/services/global-iot-network">Network services</a><button aria-label="Expand sidebar category &#x27;Network services&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/rest">Developer resources</a><button aria-label="Expand sidebar category &#x27;Developer resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/how-tos">How-to guides</a><button aria-label="Expand sidebar category &#x27;How-to guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/support">Support</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/integration-guides"><span itemprop="name">Platform services</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/integration-guides"><span itemprop="name">Integration guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">OpenVPN</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Integrate OpenVPN on Linux</h1>
<p>Using emnify, you can create a <a href="/glossary#vpn">virtual private network (VPN)</a> for your mobile IoT/M2M devices fitted with emnify SIMs.
Data traffic is exchanged between the devices and the application server through an OpenVPN tunnel, enabling direct communication with the IPs of the mobile devices (no NAT applied).</p>
<p>The tunnel is established between the emnify Core Network and the customer&#x27;s VPN gateway or server.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The <a href="https://www.youtube.com/watch?v=yt44fJpfkQ4" target="_blank" rel="noopener noreferrer">Cellular IoT University: Secure your devices with OpenVPN video</a> provides a step-by-step walk-through.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="required-preparation-in-the-emnify-portal">Required preparation in the emnify Portal<a href="#required-preparation-in-the-emnify-portal" class="hash-link" aria-label="Direct link to Required preparation in the emnify Portal" title="Direct link to Required preparation in the emnify Portal">​</a></h2>
<p>Any traffic exchanged with mobile devices is encrypted before being transmitted over the public internet, which adds an additional layer of security and privacy.
No VPN software needs to be installed on the device, or there aren&#x27;t any required configuration changes necessary.
The default emnify APN also supports VPN flows.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-vpn-configuration-file">Download the VPN configuration file<a href="#download-the-vpn-configuration-file" class="hash-link" aria-label="Direct link to Download the VPN configuration file" title="Direct link to Download the VPN configuration file">​</a></h3>
<ol>
<li><a href="https://portal.emnify.com/sign" target="_blank" rel="noopener noreferrer">Log in to your emnify account</a>.</li>
<li>Navigate to <strong>Integrations</strong> and find the <a href="https://portal.emnify.com/integrations#secure-connection" target="_blank" rel="noopener noreferrer"><strong>Secure Connection</strong></a> section.</li>
<li>Under <strong>OpenVPN</strong>, select <strong>Show instructions</strong>.</li>
</ol>
<img src="/assets/images/portal-integrations-secure-connection-openvpn-show-instructions-5b572787b187feb0e22d21116c63cfba.png" alt="">
<ol start="4">
<li>Make sure you&#x27;re on the <strong>Linux</strong> tab, then click <strong>Download client.conf</strong>.</li>
</ol>
<img src="/assets/images/portal-integrations-secure-connections-openvpn-linux-download-ea53976e9aaee1a294f2067205ffde5d.png" alt="">
<p>Select the desired region or choose <strong>Download all regions</strong>.</p>
<img src="/assets/images/portal-integrations-secure-connections-openvpn-linux-download-dropdown-67f41641bbd83b0a44ec7e50aaf828ca.png" alt="" style="height:400px">
<p>Once downloaded, store that file on your server in the folder <code>/etc/openvpn</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-the-internet-breakout-region">Change the internet breakout region<a href="#change-the-internet-breakout-region" class="hash-link" aria-label="Direct link to Change the internet breakout region" title="Direct link to Change the internet breakout region">​</a></h3>
<ol>
<li>Navigate to <a href="https://portal.emnify.com/device-policies" target="_blank" rel="noopener noreferrer"><strong>Device Policies</strong></a> in the emnify Portal.</li>
<li>In the <strong>Service Policies</strong> section, select the policy assigned to the devices you want to secure and click <strong>Details</strong>.</li>
<li>Under <strong>Internet Breakout Region</strong>, set the service policy to a VPN breakout region (for example, <code>eu-west-1 (VPN)</code>).</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-up-the-openvpn-client-on-linuxubuntu">Set up the OpenVPN client on Linux/Ubuntu<a href="#set-up-the-openvpn-client-on-linuxubuntu" class="hash-link" aria-label="Direct link to Set up the OpenVPN client on Linux/Ubuntu" title="Direct link to Set up the OpenVPN client on Linux/Ubuntu">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-openvpn-software">Install the OpenVPN software<a href="#install-the-openvpn-software" class="hash-link" aria-label="Direct link to Install the OpenVPN software" title="Direct link to Install the OpenVPN software">​</a></h3>
<p>First, install the OpenVPN package:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">install</span><span class="token plain"> openvpn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-credentials-for-authentication">Create credentials for authentication<a href="#create-credentials-for-authentication" class="hash-link" aria-label="Direct link to Create credentials for authentication" title="Direct link to Create credentials for authentication">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>User accounts with MFA enabled can&#x27;t be used to authenticate the OpenVPN tunnel.</p></div></div>
<p>Once you install the software and <a href="#download-the-vpn-configuration-file">download the configuration file</a>, setting up authentication is next.
Create a file called <code>credentials.txt</code> in the folder <code>/etc/openvpn</code>.
You can use your user credentials to authenticate or use an application token (recommended).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-with-user-credentials">Authentication with user credentials<a href="#authentication-with-user-credentials" class="hash-link" aria-label="Direct link to Authentication with user credentials" title="Direct link to Authentication with user credentials">​</a></h4>
<p>The content of the <code>credentials.txt</code> must be two lines.
The first line is your username, and the second is your password.</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">username@domain.com</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">YourPassword</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you don&#x27;t want to store your credentials, you can also choose to enter them each time the VPN tunnel is established.
If you prefer that option, comment out the line <code>auth-user-pass /etc/openvpn/credentials.txt</code> in the <code>client.conf</code> file.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-with-an-application-token">Authentication with an application token<a href="#authentication-with-an-application-token" class="hash-link" aria-label="Direct link to Authentication with an application token" title="Direct link to Authentication with an application token">​</a></h4>
<p>When you run the OpenVPN client on a VPN gateway or application server, using a dedicated application token is recommended.
In this case, the first line in the <code>credentials.txt</code> file needs to contain your emnify organization identifier. Instead of the password on the second line, store the application token.</p>
<p>You can create application tokens in the emnify Portal.
For instructions, see <a href="/portal/application-tokens">Application tokens</a>.</p>
<p>Once created, copy the token into the credentials file.
The content of the credentials file would then look like this:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">orgId</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ApplicationToken</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When you log in to the emnify Portal, it shows this data under the VPN settings.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protect-the-credentials-file">Protect the credentials file<a href="#protect-the-credentials-file" class="hash-link" aria-label="Direct link to Protect the credentials file" title="Direct link to Protect the credentials file">​</a></h3>
<p>You should keep the <code>credentials.txt</code> file only readable by root and not by other server users.
You can ensure this with the following commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">chown</span><span class="token plain"> root:root /etc/openvpn/credentials.txt</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token function" style="color:rgb(0, 0, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">chmod</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">600</span><span class="token plain"> /etc/openvpn/credentials.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-and-monitor-the-openvpn-connection">Start and monitor the OpenVPN connection<a href="#start-and-monitor-the-openvpn-connection" class="hash-link" aria-label="Direct link to Start and monitor the OpenVPN connection" title="Direct link to Start and monitor the OpenVPN connection">​</a></h3>
<p>Now you can start the VPN client by running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">service</span><span class="token plain"> openvpn start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The OpenVPN daemon logs into <code>/var/log/syslog</code>.
If everything works, it looks like this:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:55 openvpn-client ovpn-client[3027]: Data Channel Encrypt: Cipher &#x27;BF-CBC&#x27; initialized with 128 bit key</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:55 openvpn-client ovpn-client[3027]: Data Channel Encrypt: Using 160 bit message hash &#x27;SHA1&#x27; for HMAC authentication</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:55 openvpn-client ovpn-client[3027]: Control Channel: TLSv1, cipher TLSv1/SSLv3 DHE-RSA-AES256-SHA, 2048 bit RSA</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:55 openvpn-client ovpn-client[3027]: [openvpn.emnify.net] Peer Connection Initiated with [AF_INET]52.209.x.y:1194</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:57 openvpn-client ovpn-client[3027]: SENT CONTROL [openvpn.emnify.net]: &#x27;PUSH_REQUEST&#x27; (status=1)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:57 openvpn-client ovpn-client[3027]: PUSH: Received control message: &#x27;PUSH_REPLY,route 10.64.0.1,topology net30,ping 1,ping-restart 5,route 10.x.y.z 255.255.128.0,ifconfig 10.64.0.224 10.64.0.225&#x27;</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:57 openvpn-client ovpn-client[3027]: TUN/TAP device tun0 opened</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:57 openvpn-client ovpn-client[3027]: /sbin/route add -net 10.64.0.1 netmask 255.255.255.255 gw 10.64.0.225</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Jul 12 17:53:57 openvpn-client ovpn-client[3027]: /sbin/route add -net 10.x.y.z netmask 255.255.128.0 gw 10.64.0.225</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="find-the-static-private-ip-of-your-vpn-client">Find the static private IP of your VPN client<a href="#find-the-static-private-ip-of-your-vpn-client" class="hash-link" aria-label="Direct link to Find the static private IP of your VPN client" title="Direct link to Find the static private IP of your VPN client">​</a></h3>
<p>The emnify OpenVPN server allocates a static IP address to the tun interface of your VPN client.
This IP also stays the same when your VPN client is reconnecting or if you move the tunnel to a different machine.
So you can use it on your mobile devices to address your application.
Nevertheless, you should never configure the IP directly on your devices but use a DNS to resolve it.</p>
<p>Once the tunnel is established, you can see that IP address on your tun interface.
In this example, the IP address is <code>10.64.0.224</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">ubuntu@openvpn-client:~$ </span><span class="token function" style="color:rgb(0, 0, 255)">ip</span><span class="token plain"> a s tun0</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">14</span><span class="token plain">: tun0: </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP</span><span class="token operator" style="color:rgb(0, 0, 0)">&gt;</span><span class="token plain"> mtu </span><span class="token number" style="color:rgb(9, 134, 88)">1500</span><span class="token plain"> qdisc pfifo_fast state UNKNOWN qlen </span><span class="token number" style="color:rgb(9, 134, 88)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    link/none </span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    inet </span><span class="token number" style="color:rgb(9, 134, 88)">10.64</span><span class="token plain">.0.224 peer </span><span class="token number" style="color:rgb(9, 134, 88)">10.64</span><span class="token plain">.0.225/32 scope global tun0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-successful-data-connectivity">Test successful data connectivity<a href="#test-successful-data-connectivity" class="hash-link" aria-label="Direct link to Test successful data connectivity" title="Direct link to Test successful data connectivity">​</a></h3>
<p>If the VPN tunnel is established successfully, you can connect directly to your mobile devices&#x27; private IP addresses.</p>
<p>For testing, you can choose any of your devices that are currently in an active data session.</p>
<ol>
<li><a href="https://portal.emnify.com/sign" target="_blank" rel="noopener noreferrer">Log in to your emnify account</a>.</li>
<li>Navigate to <strong>Connected Devices</strong> and select one of your devices.</li>
<li>Under <strong>Details</strong>, you can see if it&#x27;s currently online and the IP address it has assigned.</li>
</ol>
<p>Now you can ping that private IP address:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">root@openvpn-client:~</span><span class="token comment" style="color:rgb(0, 128, 0)"># ping 10.x.y.z</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">PING </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain">.x.y.z </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain">.x.y.z</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">56</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">84</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"> bytes of data.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain">.x.y.z: </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">icmp_req</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">ttl</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">62</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">time</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">72</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain">.x.y.z: </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">icmp_req</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">ttl</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">62</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">time</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">80</span><span class="token plain"> ms</span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">64</span><span class="token plain"> bytes from </span><span class="token number" style="color:rgb(9, 134, 88)">10</span><span class="token plain">.x.y.z: </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">icmp_req</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">ttl</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">62</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(9, 134, 88)">time</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">75</span><span class="token plain"> ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For this to work, your device must run an IP stack responding to ICMP echo requests.
This might differ for embedded devices that implement only partial IP stack functionality.</p>
<p>You can use any network protocol.
For example, if your device runs an <code>sshd</code> daemon you can log into it via SSH.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-access-for-servers-behind-the-vpn-client">Enable access for servers behind the VPN client<a href="#enable-access-for-servers-behind-the-vpn-client" class="hash-link" aria-label="Direct link to Enable access for servers behind the VPN client" title="Direct link to Enable access for servers behind the VPN client">​</a></h3>
<p>If you have multiple servers behind your VPN gateway that need to communicate with your mobile device, you can apply masquerading using <code>iptables</code> to hide them behind the single IP address of your VPN client.</p>
<p>First, you need to enable IP forwarding on your VPN gateway (if it isn&#x27;t already active):</p>
<ol>
<li>Open your <code>/etc/sysctl.conf</code></li>
<li>Set <code>net.ipv4.ip_forward=1</code></li>
<li>Load the configuration with <code>sudo sysctl -p /etc/sysctl.conf</code></li>
</ol>
<p>After, you need to enable masquerading for the tun interface by running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-t</span><span class="token plain"> nat </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-A</span><span class="token plain"> POSTROUTING </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-o</span><span class="token plain"> tun0 </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-j</span><span class="token plain"> MASQUERADE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also forward connections coming to specific ports to an application server behind your VPN gateway by using DNAT.
For example, to forward to an internal HTTP server at IP <code>192.168.100.21</code> use:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">sudo</span><span class="token plain"> iptables </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-t</span><span class="token plain"> nat </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-A</span><span class="token plain"> PREROUTING </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-i</span><span class="token plain"> tun0 </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-p</span><span class="token plain"> tcp </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">--dport</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">80</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(9, 134, 88)">-j</span><span class="token plain"> DNAT --to-destination </span><span class="token number" style="color:rgb(9, 134, 88)">192.168</span><span class="token plain">.100.21</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To make these settings persistent, you can use the <code>iptables-persistent</code> package.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-01-29T00:00:00.000Z">Jan 29, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/integration-guides"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Integration guides</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/integration-guides/openvpn-macos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OpenVPN on macOS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#required-preparation-in-the-emnify-portal" class="table-of-contents__link toc-highlight">Required preparation in the emnify Portal</a><ul><li><a href="#download-the-vpn-configuration-file" class="table-of-contents__link toc-highlight">Download the VPN configuration file</a></li><li><a href="#change-the-internet-breakout-region" class="table-of-contents__link toc-highlight">Change the internet breakout region</a></li></ul></li><li><a href="#set-up-the-openvpn-client-on-linuxubuntu" class="table-of-contents__link toc-highlight">Set up the OpenVPN client on Linux/Ubuntu</a><ul><li><a href="#install-the-openvpn-software" class="table-of-contents__link toc-highlight">Install the OpenVPN software</a></li><li><a href="#create-credentials-for-authentication" class="table-of-contents__link toc-highlight">Create credentials for authentication</a></li><li><a href="#protect-the-credentials-file" class="table-of-contents__link toc-highlight">Protect the credentials file</a></li><li><a href="#start-and-monitor-the-openvpn-connection" class="table-of-contents__link toc-highlight">Start and monitor the OpenVPN connection</a></li><li><a href="#find-the-static-private-ip-of-your-vpn-client" class="table-of-contents__link toc-highlight">Find the static private IP of your VPN client</a></li><li><a href="#test-successful-data-connectivity" class="table-of-contents__link toc-highlight">Test successful data connectivity</a></li><li><a href="#enable-access-for-servers-behind-the-vpn-client" class="table-of-contents__link toc-highlight">Enable access for servers behind the VPN client</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/emnify/product-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">View source code on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.emnify.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">emnify website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://support.emnify.com/hc/en-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open a ticket<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://emnify.canny.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Request a feature<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/emnify/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.emnify.com/developer-blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.emnify.com/imprint-disclaimer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.emnify.com/privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                <button style="visibility:hidden;" id="ot-sdk-btn" class="ot-sdk-show-settings">
                  Cookie Settings
                </button>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin--sm"><img src="/img/logo-icon-only-dark.svg" alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-icon-only-dark.svg" alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2024 emnify GmbH. All rights reserved.</div></div></div></footer></div>
</body>
</html>